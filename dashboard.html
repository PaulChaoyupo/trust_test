
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>è‡ªè¦ºç¨‹åº¦æ¨¡çµ„ï½œä¼æ¥­å¾Œå°åˆ†æ</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: 'Noto Sans TC', sans-serif; background: #f5f7fa; padding: 2rem; max-width: 960px; margin: auto; color: #333; }
    h1, h2 { color: #1d3557; }
    section { background: #fff; border-radius: 8px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 2rem; }
    .select { padding: 0.8rem; font-size: 1rem; width: 100%; margin-bottom: 1rem; }
    ul { padding-left: 1.2rem; }
  </style>
</head>
<body>
  <h1>ä¼æ¥­å¾Œå°ï½œå—æ¸¬è€…åˆ†æé¸æ“‡</h1>

  <section>
    <h2>ğŸ“‹ é¸æ“‡å—æ¸¬è€…</h2>
    <select id="userSelector" class="select">
      <option value="">è«‹é¸æ“‡ä¸€ä½å—æ¸¬è€…</option>
    </select>
  </section>

  <div id="analysisArea" style="display:none">
    <section>
      <h2>ğŸ“Š é›·é”åœ–</h2>
      <canvas id="radarChart" height="300"></canvas>
    </section>

    <section>
      <h2>ğŸ” é›·é”ç¸½çµèª</h2>
      <p id="radarSummary">-</p>
    </section>

    <section>
      <h2>ğŸ§  äº”æ§‹é¢æ¨¡æ“¬æ¨£è²Œå´å¯«</h2>
      <div id="personaBlock">-</div>
    </section>

    <section>
      <h2>ğŸŒŸ ç¶œåˆå„ªå‹¢ç‰¹è³ª</h2>
      <div id="advBlock">-</div>
    </section>

    <section>
      <h2>âš ï¸ æ½›åœ¨æ³¨æ„èˆ‡é…ç½®é¢¨éšª</h2>
      <div id="riskBlock">-</div>
    </section>
  </div>

  <script>
    const dimensionMap = {
      "åœ˜éšŠå±•ç¾": [0, 1, 32],
      "è‡ªæˆ‘èªçŸ¥": [2, 6, 8, 9, 10, 11, 26, 27, 28, 29, 30, 32, 34],
      "åŸ·è¡Œèƒ½åŠ›": [4, 5, 19, 20, 21],
      "å‰µæ„å±•ç¾": [12, 13, 14, 17, 18],
      "å·¥ä½œé¢¨æ ¼": [3, 7, 15, 16, 31, 33]
    };

    const radarSummary = {
      "å·¥ä½œé¢¨æ ¼": "å—æ¸¬è€…åœ¨ä»»å‹™çµ„ç¹”èˆ‡åŸ·è¡Œç¯€å¥ä¸Šå±•ç¾å‡ºæ¸…æ™°çš„å€‹äººé‚è¼¯èˆ‡ç©©å®šçš„æ¨é€²åŠ›ã€‚",
      "åœ˜éšŠå±•ç¾": "å—æ¸¬è€…æ•´é«”é¢¨æ ¼å‚¾å‘ä»¥äº’å‹•ç¯€å¥ç‚ºä¸»ï¼Œæ“…æ–¼ç©©å®šåœ˜éšŠäº’å‹•ä¸¦å”èª¿é€²åº¦ã€‚",
      "è‡ªæˆ‘èªçŸ¥": "å…·å‚™å…§åœ¨è¦ºå¯Ÿèˆ‡æƒ…ç·’èª¿ç¯€çš„ç©©å®šç‰¹è³ªï¼Œæ“…é•·è‡ªæˆ‘ä¿®æ­£ä¸¦ç†è§£äº’å‹•é—œä¿‚ã€‚",
      "åŸ·è¡Œèƒ½åŠ›": "å±•ç¾é«˜æ•ˆè¡Œå‹•åŠ›èˆ‡åŸ·è¡Œç¯€å¥ï¼Œæ˜¯å°ˆæ¡ˆä»»å‹™ä¸­çš„ç©©å®šè½å¯¦è€…ã€‚",
      "å‰µæ„å±•ç¾": "å…·å‚™çªç ´æ¡†æ¶èˆ‡å¤šè§’åº¦æ•´åˆçš„æ½›èƒ½ï¼Œé©åˆåœ¨å‰µæ–°ä»»å‹™ä¸­å±•ç¾åƒ¹å€¼ã€‚"
    };

    const personaMap = {
      "å·¥ä½œé¢¨æ ¼": "ä»–æ˜¯ä¸€ä½å…·æœ‰é«˜åº¦ä»»å‹™æ„Ÿèˆ‡ç¯€å¥æ„è­˜çš„æˆå“¡ï¼Œç¿’æ…£ä»¥å…·é«”è¡Œå‹•èˆ‡æ™‚ç¨‹ä¾†çµ„ç¹”å·¥ä½œ...",
      "åœ˜éšŠå±•ç¾": "ä»–åœ¨åœ˜éšŠä¸­å±¬æ–¼å…·æœ‰é«˜ç¤¾æœƒæ•æ„Ÿåº¦çš„å”ä½œè€…ï¼Œèƒ½è¿…é€Ÿå¯Ÿè¦ºç¾å ´æƒ…ç·’èˆ‡äº’å‹•æ°›åœ...",
      "è‡ªæˆ‘èªçŸ¥": "ä»–æ˜¯ä¸€ä½é«˜åº¦è‡ªçœèˆ‡è‡ªæˆ‘èª¿æ•´æ„è­˜æ˜ç¢ºçš„äººï¼Œå°æ–¼èªè¨€ã€æƒ…ç·’èˆ‡ä»–äººå½±éŸ¿éå¸¸æ•æ„Ÿ...",
      "åŸ·è¡Œèƒ½åŠ›": "ä»–æ˜¯ä¸€ä½æ¥µå…·å¯¦ä½œå°å‘çš„äººï¼Œç¿’æ…£å°‡ä»»ä½•æ¨¡ç³Šçš„æ¦‚å¿µè½‰åŒ–ç‚ºå¯åŸ·è¡Œçš„ä»»å‹™...",
      "å‰µæ„å±•ç¾": "ä»–æ“…é•·é‡çµ„è§€é»èˆ‡è·³è„«å¸¸è¦æ€ç¶­ï¼Œå¸¸åœ¨å•é¡Œè† è‘—æ™‚æå‡ºåå‘ææ¡ˆæˆ–ç•°æ¥­è§£æ³•..."
    };

    const strengths = {
      "å·¥ä½œé¢¨æ ¼+åŸ·è¡Œèƒ½åŠ›": "å±•ç¾å‡ºæ˜ç¢ºçš„ä»»å‹™ç¯€å¥èˆ‡è½å¯¦åŠ›ï¼Œé©åˆé•·æœŸä»»å‹™æ¨å‹•èˆ‡ç³»çµ±åŒ–ç®¡ç†ã€‚",
      "åœ˜éšŠå±•ç¾+è‡ªæˆ‘èªçŸ¥": "å…¼å…·ç¤¾æœƒæ•æ„Ÿåº¦èˆ‡è‡ªæˆ‘èª¿æ•´èƒ½åŠ›ï¼Œæ“…é•·å”èª¿èˆ‡åŒç†çš„è§’è‰²ã€‚",
      "å‰µæ„å±•ç¾+è‡ªæˆ‘èªçŸ¥": "å…·å‚™å‰µæ„è¼¸å‡ºèˆ‡å…§åœ¨åæ€çš„æ•´åˆåŠ›ï¼Œèƒ½é©æ‡‰è®Šå‹•èˆ‡å¿«é€Ÿä¿®æ­£ã€‚",
      "å·¥ä½œé¢¨æ ¼+å‰µæ„å±•ç¾": "å…¼å…·çµæ§‹èˆ‡å½ˆæ€§ï¼Œå¯å°‡æ¦‚å¿µå…·é«”åŒ–ä¸¦è½å¯¦ç‚ºå¯åŸ·è¡Œæ–¹æ¡ˆã€‚",
      "å·¥ä½œé¢¨æ ¼+è‡ªæˆ‘èªçŸ¥": "å…·å‚™è¦åŠƒåŠ›èˆ‡æƒ…ç·’ç©©å®šæ€§ï¼Œé©åˆå…§éƒ¨åˆ¶åº¦è¨­è¨ˆèˆ‡åŸ·è¡Œç­–ç•¥ã€‚",
      "åŸ·è¡Œèƒ½åŠ›+å‰µæ„å±•ç¾": "å…·å‚™è¡Œå‹•åŠ›èˆ‡å‰µæ–°è¯æƒ³åŠ›ï¼Œå¯å¿«é€Ÿå˜—è©¦æ–°æ–¹æ¡ˆä¸¦å¯¦è¸æ¸¬è©¦ã€‚",
      "å·¥ä½œ+åŸ·è¡Œ+åœ˜éšŠ": "å±•ç¾é«˜åº¦è½å¯¦åŠ›èˆ‡åœ˜éšŠå”èª¿åŠ›ï¼Œæ˜¯åœ˜éšŠç©©å®šè¼¸å‡ºçš„ä¸­å …äººæ‰ã€‚"
    };

    const risks = {
      "å·¥ä½œé¢¨æ ¼": "ä»»å‹™ç¯€å¥èˆ‡çµæ§‹æ„è­˜åä½ï¼Œå¯èƒ½éœ€è¼ƒå¤šå¼•å°èˆ‡å¤–éƒ¨ç¯€å¥è¨­å®šã€‚",
      "åœ˜éšŠå±•ç¾": "äº’å‹•åƒèˆ‡åº¦ä½ï¼Œæ˜“è¢«èª¤è§£ç‚ºå†·æ¼ ï¼Œé©åˆå®‰æ’åœ¨ç¨ç«‹ä½œæ¥­æµç¨‹ä¸­ã€‚",
      "è‡ªæˆ‘èªçŸ¥": "å°äº’å‹•å½±éŸ¿è¼ƒä¸æ•æ„Ÿï¼Œéœ€æ­é…å…·å›é¥‹èƒ½åŠ›çš„ä¸»ç®¡åŠ å¼·åæ€æ©Ÿåˆ¶ã€‚",
      "åŸ·è¡Œèƒ½åŠ›": "å•Ÿå‹•åŠ›èˆ‡æŒçºŒæ€§è¼ƒå¼±ï¼Œé©åˆä»»å‹™åˆ‡å‰²æ˜ç¢ºä¸”æœ‰å›å ±æ©Ÿåˆ¶ä¹‹ç’°å¢ƒã€‚",
      "å‰µæ„å±•ç¾": "å‰µæ–°å½ˆæ€§è¼ƒä½ï¼Œéœ€å…·é«”ç¤ºç¯„æˆ–çµæ§‹å¼•å°æå‡ç™¼æƒ³ä¿¡å¿ƒã€‚"
    };

    function calculateAvg(scores) {
      const result = {};
      for (const [k, v] of Object.entries(dimensionMap)) {
        result[k] = parseFloat((v.reduce((sum, i) => sum + (scores[i] || 0), 0) / v.length).toFixed(2));
      }
      return result;
    }

    function renderRadar(data) {
      new Chart(document.getElementById("radarChart"), {
        type: 'radar',
        data: {
          labels: Object.keys(data),
          datasets: [{
            label: 'äº”æ§‹é¢åˆ†å¸ƒ',
            data: Object.values(data),
            backgroundColor: 'rgba(33, 111, 163, 0.2)',
            borderColor: '#2170a3',
            pointBackgroundColor: '#2170a3'
          }]
        },
        options: {
          scales: { r: { min: 1, max: 3, ticks: { stepSize: 0.5 } } },
          plugins: { legend: { display: false } }
        }
      });
    }

    window.onload = () => {
      const raw = localStorage.getItem("trust_test_dataset") || "[]";
      const dataset = JSON.parse(raw);
      const selector = document.getElementById("userSelector");

      dataset.forEach((d, i) => {
        const option = document.createElement("option");
        option.value = i;
        option.text = `${d.name}ï½œ${d.date}`;
        selector.appendChild(option);
      });

      selector.onchange = () => {
        const index = selector.value;
        if (!index) return;

        const user = dataset[index];
        const avg = calculateAvg(user.scores);
        const sorted = Object.entries(avg).sort((a, b) => b[1] - a[1]);
        const top = sorted[0][0];
        const high = sorted.filter(([_, v]) => v >= 2.6).map(([k]) => k);
        const low = sorted.filter(([_, v]) => v < 2.1).map(([k]) => k);

        document.getElementById("analysisArea").style.display = "block";
        document.getElementById("radarSummary").innerText = radarSummary[top];
        document.getElementById("personaBlock").innerText = personaMap[top];

        let matchedKey = high.join("+");
        if (!strengths[matchedKey]) {
          matchedKey = high.slice(0, 2).join("+"); // fallback to 2é …çµ„åˆ
        }
        document.getElementById("advBlock").innerHTML = strengths[matchedKey] || "å°šæœªå®šç¾©çµ„åˆ";

        document.getElementById("riskBlock").innerHTML = low.map(k => "<li>" + risks[k] + "</li>").join("");
        renderRadar(avg);
      };
    };
  </script>
</body>
</html>
